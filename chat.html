<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Group Chat Room (စကားပြောခန်း) - KP Blog</title>
    <link rel="stylesheet" href="chat.css"> 
    
    </head>
<body>

    <header>
        <div class="header-content">
            <div class="logo-and-title">
                <img src="logo.png" alt="KP Logo" class="logo">
                <h1 class="site-title">KP Blog</h1>
            </div>
            <nav>
                <a href="index.html">Home</a>
                <a href="posts.html">Posts</a>
                <a href="free.html">Free</a>
                <a href="buy.html">Buy</a>
                <a href="all.html">All</a>
                <a href="review.html">Review</a> 
                <a href="chat.html">Chat</a> <a href="privacy.html">Privacy Policy</a>
                <a href="contact.html">Contact</a>
                <a href="about.html">About</a>
                <a href="guides.html">Guides</a>
                <a href="chat.html">Chat Group</a>
            </nav>
        </div>
    </header>

    <main>
        <div id="sendbird-chat-wrapper">
            <h2>API Connection စစ်ဆေးနေပါသည်...</h2> 
        </div>
    </main>

    <footer>
    </footer>

    <script src="https://cdn.sendbird.com/sdk/3.0.46/sendbird.min.js"></script>
    <script src="https://unpkg.com/sendbird-uikit@2.1.2/dist/sendbird-uikit.min.js"></script> 

    <script>
        const SENDBIRD_APP_ID = "30E5612B-177A-4D4D-A98A-652D88649503"; 
        const USER_ID = "kp_final_connection_check_1"; 
        const wrapper = document.getElementById('sendbird-chat-wrapper');

        // 1. Sendbird Core SDK ကို စတင်ခြင်း
        const sb = new SendBird.default({ appId: SENDBIRD_APP_ID });

        // 2. User Login ဝင်ရောက်ရန် ကြိုးစားခြင်း
        sb.connect(USER_ID, function(user, error) {
            if (error) {
                // *** Connection မအောင်မြင်ပါက ဤနေရာမှ Error ကို ပြသပါမည် ***
                wrapper.innerHTML = "<h2>❌ Connection Failed!</h2>" +
                                    "<p>Code: " + error.code + "</p>" +
                                    "<p>Message: " + error.message + "</p>";
                console.error("Sendbird Connection Error:", error);
                return;
            }
            
            // *** Connection အောင်မြင်ပါက UI Kit ကို Render လုပ်ပါမည် ***
            wrapper.innerHTML = "<h2>✅ API Connection Success!</h2><p>Attempting to load Chat UI...</p>";
            
            const sb_ui = SendBird.uikit;
            sb_ui.render({
                hostElement: wrapper,
                appId: SENDBIRD_APP_ID,
                userId: USER_ID,
            });
        });
    </script>
</body>
</html>
