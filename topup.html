<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KP Top Up • Login လိုအပ်ပါသည်</title>
    <meta name="description" content="KP Top Up - Google ဖြင့် ဝင်ရောက်ပြီး လုံခြုံစိတ်ချစွာ ဝယ်ယူပါ">

    <meta name="google-signin-client_id" content="745888739692-gq8h4f6tjcr35d7ttmce4vg6d03of5tp.apps.googleusercontent.com">
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <style>
        :root{--p:#00ff9d;--pd:#00cc7a;--bg:#0d0d1f;--c:rgba(20,25,50,0.9);--t:#e0e0ff;--b:rgba(0,255,157,0.3);}
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:'Pyidaungsu',sans-serif;background:linear-gradient(135deg,#0d0d1f,#1a1a2e);color:var(--t);min-height:100vh;display:flex;align-items:center;justify-content:center;background-attachment:fixed;}
        .login-box{background:var(--c);backdrop-filter:blur(15px);border-radius:20px;padding:40px;width:90%;max-width:420px;text-align:center;border:1px solid var(--b);box-shadow:0 20px 50px rgba(0,0,0,0.6);}
        .logo img{height:90px;border-radius:20px;border:4px solid var(--p);margin-bottom:20px;box-shadow:0 0 30px rgba(0,255,157,0.6);}
        h1{font-size:2.8em;background:linear-gradient(90deg,#00ff9d,#00ccff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin:15px 0 25px;}
        p{font-size:1.15em;margin:20px 0;color:#ccc;}
        .hidden{display:none !important;}
        footer{position:fixed;bottom:15px;left:0;right:0;text-align:center;color:#666;font-size:0.9em;}
    </style>
</head>
<body>

<div class="login-box" id="loginBox">
    <div class="logo"><img src="images/logo.png" alt="KP Logo"></div>
    <h1>KP Top Up</h1>
    <p>လုံခြုံစိတ်ချစွာ ဝယ်ယူရန်<br><strong style="color:var(--p);">Google ဖြင့် ဝင်ရောက်ပါ</strong></p>
    <div id="googleSignIn" style="margin:35px auto;"></div>
    <p style="color:#ff6b6b;font-size:0.95em;">လိမ်ညာသူများကို ချက်ချင်း Ban လုပ်ပါမည်!</p>
</div>

<div id="topupPage" class="hidden"></div>
<footer>© 2025 KP Blog • လုံခြုံရေး အမြင့်ဆုံး</footer>

<script>
const GOOGLE_CLIENT_ID = "745888739692-gq8h4f6tjcr35d7ttmce4vg6d03of5tp.apps.googleusercontent.com";
let currentUser = null;

function decodeJwt(t){try{let b=t.split('.')[1].replace(/-/g,'+').replace(/_/g,'/');let p=decodeURIComponent(atob(b).split('').map(c=>'%'+('00'+c.charCodeAt(0).toString(16)).slice(-2)).join(''));return JSON.parse(p)}catch(e){return null}}

window.handleCredentialResponse = function(r){
    const p = decodeJwt(r.credential);
    if(!p||!p.email){alert("Google Sign In မအောင်မြင်ပါ။ ထပ်စမ်းကြည့်ပါ။");return;}
    currentUser={name:p.name,email:p.email,id:p.sub,photo:p.picture};
    document.getElementById("loginBox").classList.add("hidden");
    document.getElementById("topupPage").classList.remove("hidden");
    loadTopUpPage();
};

function loadTopUpPage(){
    document.getElementById("topupPage").innerHTML = `
    <header style="position:fixed;top:0;left:0;right:0;background:rgba(10,10,30,0.98);backdrop-filter:blur(20px);z-index:1000;padding:12px 20px;border-bottom:1px solid var(--b);">
        <div style="max-width:1400px;margin:auto;display:flex;align-items:center;justify-content:space-between;">
            <div style="display:flex;align-items:center;gap:15px;">
                <img src="${currentUser.photo}" width="52" height="52" style="border-radius:50%;border:3px solid var(--p);box-shadow:0 0 20px rgba(0,255,157,0.6);">
                <div>
                    <div style="font-weight:bold;color:var(--p);font-size:1.3em;">${currentUser.name}</div>
                    <div style="font-size:0.9em;color:#aaa;">${currentUser.email}</div>
                </div>
            </div>
            <div style="color:#ff6b6b;font-size:0.9em;background:rgba(255,107,107,0.15);padding:6px 12px;border-radius:10px;">လိမ်ညာပါက ချက်ချင်း Ban</div>
        </div>
    </header>

    <main style="margin-top:90px;padding:20px;max-width:1000px;margin:auto;">
        <h1 style="text-align:center;font-size:3.2em;margin:20px 0;background:linear-gradient(90deg,#00ff9d,#00ccff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 30px rgba(0,255,157,0.4);">KP Top Up Center</h1>

        <div style="background:var(--c);backdrop-filter:blur(15px);border-radius:25px;padding:35px;border:1px solid var(--b);box-shadow:0 20px 50px rgba(0,0,0,0.5);">
            <label style="font-size:1.3em;color:var(--p);">ဂိမ်းရွေးပါ</label>
            <select id="game" style="width:100%;padding:16px;margin:15px 0;border-radius:15px;border:1px solid var(--b);background:rgba(10,15,35,0.9);color:white;font-size:1.1em;">
                <option value="pubg">PUBG Mobile</option>
                <option value="ml">Mobile Legends</option>
            </select>

            <label style="font-size:1.3em;color:var(--p);">User ID</label>
            <input type="text" id="userId" placeholder="ဥပမာ: 5123456789 (or (5123456789))" oninput="this.value=this.value.replace(/[^\\d()]/g,'')" style="width:100%;padding:16px;margin:15px 0;border-radius:15px;border:1px solid var(--b);background:rgba(10,15,35,0.9);color:white;font-size:1.1em;">

            <label style="font-size:1.3em;color:var(--p);">ငွေလွှဲပြေစာ နောက်ဆုံး ၅ လုံး</label>
            <input type="text" id="refNumber" maxlength="7" placeholder="ဥပမာ: 54321 (or (54321))" oninput="this.value=this.value.replace(/[^\\d()]/g,'')" style="width:100%;padding:16px;margin:15px 0;border-radius:15px;border:1px solid var(--b);background:rgba(10,15,35,0.9);color:white;font-size:1.1em;letter-spacing:6px;font-weight:bold;">

            <div style="text-align:center;margin:30px 0;font-size:1.5em;color:var(--p);">
                <span id="gameName">PUBG Mobile</span> အတွက် ပမာဏ ရွေးပါ
            </div>

            <div id="packages" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:20px;margin:35px 0;"></div>

            <div style="display:flex;justify-content:center;gap:40px;margin:40px 0;flex-wrap:wrap;">
                <div class="pay active" data-pay="wave" style="text-align:center;cursor:pointer;">
                    <img src="images/wave.png" width="90" height="90" style="border-radius:20px;border:4px solid var(--p);box-shadow:0 0 25px rgba(0,255,157,0.7);"><br><span style="font-weight:bold;margin-top:8px;display:block;">Wave Pay</span>
                </div>
                <div class="pay" data-pay="kpay" style="text-align:center;cursor:pointer;">
                    <img src="images/kpay.png" width="90" height="90" style="border-radius:20px;border:4px solid transparent;transition:0.4s;"><br><span style="font-weight:bold;margin-top:8px;display:block;">KPay</span>
                </div>
            </div>

            <div style="text-align:center;margin:30px 0;color:#ff6b6b;font-size:1.3em;background:rgba(255,107,107,0.15);padding:15px;border-radius:15px;">
                ငွေလွှဲပြီးမှ အောက်က ခလုပ်ကို နှိပ်ပါ<br>
                <strong style="font-size:1.4em;color:var(--p);">Wave/KPay: 09966955081</strong>
            </div>

            <button onclick="submitOrder()" style="width:100%;padding:22px;background:linear-gradient(45deg,var(--p),var(--pd));color:black;font-weight:bold;font-size:1.7em;border-radius:50px;border:none;cursor:pointer;box-shadow:0 15px 40px rgba(0,255,157,0.6);transition:0.3s;">
                အတည်ပြုပြီး မှာယူမည်
            </button>
            <button id="loadingBtn" style="display:none;width:100%;padding:22px;background:#444;color:white;font-size:1.7em;border-radius:50px;" disabled>ပို့နေပါသည်...</button>
        </div>
    </main>`;

    const packages = {
        pubg:[{name:"60 UC",price:"1000 ကျပ်"},{name:"325 UC",price:"5000 ကျပ်"},{name:"600 UC",price:"9000 ကျပ်"},{name:"1800 UC",price:"25000 ကျပ်"},{name:"3850 UC",price:"50000 ကျပ်"}],
        ml:[{name:"86 Diamonds",price:"3000 ကျပ်"},{name:"172 Diamonds",price:"5500 ကျပ်"},{name:"257 Diamonds",price:"8000 ကျပ်"},{name:"344 Diamonds",price:"10500 ကျပ်"},{name:"706 Diamonds",price:"21000 ကျပ်"}]
    };
    let selectedPkg = null;
    let selectedPay = "wave";

    function loadPackages(){
        const game = document.getElementById("game").value;
        document.getElementById("gameName").textContent = game==="pubg"?"PUBG Mobile":"Mobile Legends";
        const c = document.getElementById("packages"); c.innerHTML="";
        packages[game].forEach((p,i)=>{
            const d=document.createElement("div");
            d.className="pkg"+(i===0?" active":"");
            d.innerHTML=`<h3>\( {p.name}</h3><p> \){p.price}</p>`;
            d.style.cssText="background:rgba(0,255,157,0.15);border:3px solid var(--p);border-radius:18px;padding:25px;text-align:center;cursor:pointer;transition:0.4s;box-shadow:0 8px 20px rgba(0,0,0,0.3);";
            if(i===0) d.style.cssText+="background:var(--p);color:#000;transform:translateY(-12px);box-shadow:0 15px 35px rgba(0,255,157,0.5);";
            d.onclick=()=>{
                document.querySelectorAll(".pkg").forEach(e=>e.style.cssText="background:rgba(0,255,157,0.15);border:3px solid var(--p);border-radius:18px;padding:25px;text-align:center;cursor:pointer;transition:0.4s;box-shadow:0 8px 20px rgba(0,0,0,0.3);");
                d.style.cssText="background:var(--p);color:#000;transform:translateY(-12px);box-shadow:0 15px 35px rgba(0,255,157,0.5);border:3px solid var(--p);border-radius:18px;padding:25px;text-align:center;cursor:pointer;transition:0.4s;";
                selectedPkg=p;
            };
            if(i===0) selectedPkg=p;
            c.appendChild(d);
        });
    }
    loadPackages();
    document.getElementById("game").onchange=loadPackages;

    document.querySelectorAll(".pay").forEach(p=>{
        p.onclick=()=>{
            document.querySelectorAll(".pay img").forEach(img=>img.style.cssText="border-radius:20px;border:4px solid transparent;transition:0.4s;");
            p.querySelector("img").style.cssText="border-radius:20px;border:4px solid var(--p);box-shadow:0 0 25px rgba(0,255,157,0.7);transition:0.4s;";
            document.querySelectorAll(".pay").forEach(e=>e.classList.remove("active"));
            p.classList.add("active");
            selectedPay=p.dataset.pay;
        };
    });

    window.submitOrder = async function(){
        let u = document.getElementById("userId").value.trim();
        let r = document.getElementById("refNumber").value.trim();
        if(!u.replace(/[()]/g,"") || !selectedPkg || r.replace(/[()]/g,"").length!==5){
            alert("အားလုံးကို မှန်ကန်စွာ ဖြည့်ပါ။"); return;
        }
        document.querySelector("button[onclick='submitOrder()']").style.display="none";
        document.getElementById("loadingBtn").style.display="block";

        const msg = `*KP Top Up မှာယူမှု အသစ်*

*ဝယ်သူအချက်အလက်*
အမည်: ${currentUser.name}
အီးမေးလ်: ${currentUser.email}
Google ID (Ban လုပ်ရန်): ${currentUser.id}

ဂိမ်း: ${document.getElementById("game").options[document.getElementById("game").selectedIndex].text}
User ID: ${u}
ပမာဏ: ${selectedPkg.name}
ဈေးနှုန်း: ${selectedPkg.price}
ငွေပေးချေနည်း: ${selectedPay==="wave"?"Wave Pay":"KPay"}
ငွေလွှဲပြေစာ နောက်ဆုံး ၅ လုံး: ${r}

အချိန်: ${new Date().toLocaleString("my-MM")}`;

        try{
            await fetch("https://api.telegram.org/bot8565432520:AAFbW60KA7GUXuTx_MQJNT_iFEWr73lHvm8/sendMessage",{
                method:"POST",headers:{"Content-Type":"application/json"},
                body:JSON.stringify({chat_id:7070690379,text:msg,parse_mode:"Markdown"})
            });
            alert("အောင်မြင်စွာ ပို့ပြီးပါပြီ!\nAdmin က မကြာခင် ထည့်ပေးပါမည်။");
        }catch(e){alert("အင်တာနက်ပြဿနာ ရှိနေပါသည်။");}

        document.querySelector("button[onclick='submitOrder()']").style.display="block";
        document.getElementById("loadingBtn").style.display="none";
    };
}

window.onload = () => {
    google.accounts.id.initialize({client_id: GOOGLE_CLIENT_ID, callback: handleCredentialResponse});
    google.accounts.id.renderButton(document.getElementById("googleSignIn"),
        {theme:"outline", size:"large", text:"signin_with", width:"320", logo_alignment:"left"}
    );
    google.accounts.id.prompt();
};
</script>
</body>
</html>
